# 用于管理和保存同学信息的全栈 Web 同学录

## 一、项目定位与核心目标

> 一个用于长期保存、管理、回忆同学信息的私有化同学录系统，支持隐私控制、权限分级和数据扩展。

**核心目标**

- 信息可长期保存（结构稳定）
- 支持多角色（你 / 同学）
- 数据可控（权限、隐私）
- 方便未来扩展（照片、留言、统计）

------

## 二、角色与权限设计（非常重要）

### 1️⃣ 角色划分

| 角色                | 说明                         |
| ------------------- | ---------------------------- |
| **ADMIN（你）**     | 系统拥有者，最高权限         |
| **STUDENT（同学）** | 普通用户，只能管理自己的信息 |
| **GUEST（可选）**   | 只读访问（未来扩展）         |

> JWT 中直接携带 `userId + role`，避免每次查库

------

## 三、核心功能模块总览

```
同学录系统
├── 用户与认证
├── 班级 / 分组管理
├── 同学信息管理
├── 隐私与可见性
├── 照片与附件（可选）
├── 留言与回忆（可选）
├── 搜索与筛选
├── 系统管理
```

下面逐个拆解 👇

------

## 四、功能模块详细设计

## 1️⃣ 用户与认证模块（JWT 核心）

### 功能点

- 用户注册（可关闭，仅你创建）
- 用户登录
- JWT 鉴权
- 修改密码
- 重置密码（管理员）

### 用户基础字段（示例）

```text
id
username
password
role（ADMIN / STUDENT）
status（NORMAL / DISABLED）
create_time
```

### 权限规则

- ADMIN：管理所有同学信息
- STUDENT：只能看/改自己的信息
- 禁止 STUDENT 查看被设为私密的字段

------

## 2️⃣ 班级 / 分组管理模块

用于**区分不同阶段的同学**，比如：

- 初中
- 高中
- 大学

### 功能点

- 创建班级
- 编辑班级信息
- 班级下成员管理
- 按班级查看同学列表

### 班级字段

```text
id
name（如：2019级计算机1班）
description
start_year
end_year
```

------

## 3️⃣ 同学信息管理（核心模块）

### 基础信息（强烈建议拆分结构）

#### 基础档案（固定结构）

```text
姓名
性别
生日
籍贯
联系方式（手机 / 微信 / QQ）
```

#### 学业信息

```text
学校
班级
专业
毕业去向
```

#### 个性化信息

```text
兴趣爱好
座右铭
最难忘的事
```

------

## 4️⃣ 隐私与可见性系统

### 可见性级别

```text
PUBLIC     所有人可见
CLASS_ONLY 同班可见
PRIVATE    仅本人 & ADMIN
```

### 实现方式（推荐）

- 每个字段一个 `visibility`
- 或：字段分组统一控制

### 示例

```json
{
  "phone": "PRIVATE",
  "hobby": "PUBLIC",
  "motto": "CLASS_ONLY"
}
```

👉 你这是**比 90% 学校同学录都高级的设计**

------

## 5️⃣ 照片与附件模块（可选但推荐）

### 功能点

- 头像上传
- 生活照上传
- 班级合照
- 附件管理

### 后端建议

- MinIO / 本地存储
- 数据库只存路径 + 元数据

------

## 6️⃣ 留言与回忆模块（情感核心）

### 功能点

- 给某位同学留言
- 留言可见性控制
- 留言审核（ADMIN）

### 留言字段

```text
from_user_id
to_user_id
content
visibility
create_time
```

------

## 7️⃣ 搜索与筛选模块

### 支持条件

- 姓名
- 班级
- 毕业去向
- 兴趣关键词
- 是否在同一城市

------

## 8️⃣ 系统管理模块（ADMIN）

- 用户管理
- 数据导出（Excel / CSV）
- 操作日志
- 数据备份（逻辑层）

------

